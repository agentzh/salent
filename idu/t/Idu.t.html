<html>
 <head>
  <title>D:\Agent2002\Salent\v0.13\ModelSim\idu\t\Idu.t</title>
 </head>
 <body><tt><pre>
<font color=gray>     1</font>  <a name="line_1"></a>#: Idu.t
<font color=gray>     2</font>  <a name="line_2"></a>#: Test Idu.pm
<font color=gray>     3</font>  <a name="line_3"></a>#: Salent v0.13
<font color=gray>     4</font>  <a name="line_4"></a>#: Copyright (c) 2005 Agent Zhang
<font color=gray>     5</font>  <a name="line_5"></a>#: 2005-07-24 2005-08-20
<font color=gray>     6</font>  <a name="line_6"></a>
<font color=gray>     7</font>  <a name="line_7"></a>use strict;
<font color=gray>     8</font>  <a name="line_8"></a>use warnings;
<font color=gray>     9</font>  <a name="line_9"></a>
<font color=gray>    10</font>  <a name="line_10"></a>#use Data::Dumper;
<font color=gray>    11</font>  <a name="line_11"></a>use Test::More tests => 10;
<font color=gray>    12</font>  <a name="line_12"></a>BEGIN { use_ok('inc::Idu'); }
<font color=gray>    13</font>  <a name="line_13"></a>
<font color=gray>    14</font>  <a name="line_14"></a>{
<font color=gray>    15</font>  <a name="line_15"></a># Test sub Idu::readbytes
<font color=gray>    16</font>  <a name="line_16"></a>my $buf = " 00000101 6b  00 66 11 10001011 fa ";
<font color=gray>    17</font>  <a name="line_17"></a>ok open($Idu::source, '<', \$buf);
<font color=gray>    18</font>  <a name="line_18"></a>ok eq_array([Idu::readbytes(2)], [qw(00000101 01101011)]);
<font color=gray>    19</font>  <a name="line_19"></a>ok eq_array(\@Idu::oldbytes, [qw(00000101 6b)]);
<font color=gray>    20</font>  <a name="line_20"></a>#ok eq_array([Idu::readbytes(1)], [qw(00000000)]);
<font color=gray>    21</font>  <a name="line_21"></a>is Idu::readbytes(1), '00000000';
<font color=gray>    22</font>  <a name="line_22"></a>ok eq_array(\@Idu::oldbytes, [qw(00000101 6b 00)]);
<font color=gray>    23</font>  <a name="line_23"></a>#ok eq_array([Idu::readbytes], [qw(01100110)]);
<font color=gray>    24</font>  <a name="line_24"></a>is Idu::readbytes, '01100110';
<font color=gray>    25</font>  <a name="line_25"></a>ok eq_array(\@Idu::oldbytes, [qw(00000101 6b 00 66)]);
<font color=gray>    26</font>  <a name="line_26"></a>my @bytes = Idu::readbytes(3);
<font color=gray>    27</font>  <a name="line_27"></a>#warn Data::Dumper->Dump([\@bytes], ['bytes']);
<font color=gray>    28</font>  <a name="line_28"></a>ok eq_array(\@bytes, [qw(00010001 10001011 11111010)]);
<font color=gray>    29</font>  <a name="line_29"></a>ok eq_array(\@Idu::oldbytes, [qw(00000101 6b 00 66 11 10001011 fa)]);
<font color=gray>    30</font>  <a name="line_30"></a>close $Idu::source;
<font color=gray>    31</font>  <a name="line_31"></a>undef @Idu::oldbytes;
<font color=gray>    32</font>  <a name="line_32"></a>}
 </pre></tt></body>
</html>
